---
title: opencode-await
description: Synchronous tool calls for OpenCode agents - minimize context window pollution
template: splash
hero:
  tagline: Minimize context window pollution. Transform noisy polling loops into single, deterministic states with automatic log summarization.
  actions:
    - text: Get Started
      link: /getting-started/installation/
      icon: right-arrow
    - text: View on GitHub
      link: https://github.com/rothnic/opencode-await
      icon: external
      variant: minimal
---

import { Card, CardGrid } from '@astrojs/starlight/components';

<div class="terminal-mockup">
  <div class="terminal-header">
    <div class="terminal-dots">
      <span class="dot"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>
    <span class="terminal-title">agent_session_control.log</span>
  </div>
  <div class="terminal-body">
    <div class="terminal-columns">
      <div class="terminal-panel polling-panel">
        <div class="panel-label">Polling Noise</div>
        <div class="terminal-content">
          <div class="log-line"><span class="prompt blue">&gt;</span> start_task --id=9</div>
          <div class="log-line indent">task initiated...</div>
          <div class="log-line dim"><span class="prompt yellow">&gt;</span> check_status 9</div>
          <div class="log-line indent">status: running...</div>
          <div class="log-line dim"><span class="prompt yellow">&gt;</span> check_status 9</div>
          <div class="log-line indent">status: running...</div>
          <div class="log-line dim"><span class="prompt yellow">&gt;</span> check_status 9</div>
          <div class="log-line indent">status: running...</div>
          <div class="log-line dim"><span class="prompt yellow">&gt;</span> check_status 9</div>
          <div class="log-line indent">status: running...</div>
          <div class="log-line dim"><span class="prompt yellow">&gt;</span> check_status 9</div>
          <div class="terminal-fade"></div>
        </div>
        <div class="panel-status bad">Wasted Tokens</div>
      </div>
      <div class="terminal-panel clean-panel">
        <div class="panel-label accent">Clean Session</div>
        <div class="terminal-content clean">
          <div class="log-line accent"><span class="prompt purple">&gt;</span> <strong>await_task</strong></div>
          <pre class="json-output"><span class="bracket">{"{"}</span>
  "status": "done",
  "result": "built",
  "summary": "..."
<span class="bracket">{"}"}</span></pre>
        </div>
        <div class="connector"></div>
        <div class="panel-status good">Minimal State</div>
      </div>
      <div class="terminal-panel summary-panel">
        <div class="panel-label">Summarized Output</div>
        <div class="summary-visual">
          <div class="log-stack">
            <div class="stack-line"></div>
            <div class="stack-line short"></div>
            <div class="stack-line"></div>
            <div class="stack-line"></div>
            <div class="stack-line medium"></div>
            <div class="stack-line"></div>
            <div class="stack-line half"></div>
            <span class="line-count">1000 lines</span>
          </div>
          <div class="filter-arrow">
            <span class="filter-icon">â–¼</span>
          </div>
          <div class="summary-result">
            <span class="key">"summary"</span>: <span class="value">"Build completed successfully with no critical errors."</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="value-props">
  <div class="value-prop">
    <span class="value-icon">ðŸ’°</span>
    <span class="value-text">Perfect for metered AI services that count each message</span>
  </div>
  <div class="value-prop">
    <span class="value-icon">ðŸ§¹</span>
    <span class="value-text">Keeps session context clean with concise output</span>
  </div>
  <div class="value-prop">
    <span class="value-icon">ðŸ¤–</span>
    <span class="value-text">Uses free models (like Copilot) for log summarization</span>
  </div>
</div>

<div class="quick-install-container">

## Quick Install

```json
// opencode.json
{
  "plugin": ["opencode-await"]
}
```

</div>

## Clean Session Control

Optimized architecture for reducing noise in autonomous agent loops.

<CardGrid>
  <Card title="State Determinism" icon="rocket">
    Ensure the environment reaches a complete state before returning control to the agent, eliminating race conditions.
  </Card>
  <Card title="Context Hygiene" icon="document">
    Prevent context window overflow by replacing hundreds of polling logs with a single interaction record.
  </Card>
  <Card title="Log Summarization" icon="star">
    Automatically condense verbose stdout streams into semantic summaries using lightweight local models.
  </Card>
  <Card title="JSON Enforced" icon="pencil">
    Wrap any CLI tool in a strict JSON schema return type, making parsing 100% reliable for your LLM.
  </Card>
</CardGrid>
